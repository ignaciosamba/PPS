\section{Investigaci\'on} % (fold)
\label{sec:investigacion}

La etapa de investigaci\'on consisti\'o en encontrar un microcontrolador que satisfaga la mayor cantidad de requerimientos principales. El sistema entero consiste en interactuar con el n\'ucleo, que es el microcontrolador, por lo que esta etapa requiri\'o de an\'alisis detallado de las opciones con las se contaba. En el cuadro \ref{tabla_micros} se pueden ver los microcontroladores considerados en la etapa de selecci\'on.

% Table generated by Excel2LaTeX from sheet 'Sheet1'
\clearpage
\begin{landscape} % TABLA DE MICROS

\begin{table}[!]
\centering
\begin{flushleft}
% Table generated by Excel2LaTeX from sheet 'Sheet1'
\scalebox{0.68}{
\begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|c|}
\hline
Fabricante & Modelo & RAM(K) & canales ADC & Referencia & Resoluci\'on & ganancia & Contadores & low power & puerto serie & Dimensi\'on (') &   Pins &   Us\$ \\
\hline
 Intel & 8XC51GB &    256 &      8 &    GND & 8 bits &     no & 3 (16 bits) &     si & salida y entrada RS232 &      N &     32 &      N \\
\hline
Silicon Labs & C8051F352 &    768 &      8 & DIF/GND & 24 bits &   128x & 4 (16 bits) &     si & Smbus/$I^{2}$C, UART, SPI & 0,35x0,35 &     32 &    2,3 \\
\hline
 Atmel & AT89C5115 &    256 &      8 &    GND & 8/10 bits &     no & 3 (16 bits) &     si & UART (3 modos Full Duplex) & 0,34x0,34 &     32 &     10 \\
\hline
Microchip & PIC18F4550 &     32 &     13 &    GND & 10 bits &     no & 4(8 y 16 bits) &     si & SPI, $I^{2}$C, UART/USART, USB & 0,47x0,47 &     44 &   5,36 \\
\hline
   Nec & PD78C17 &   1024 &      8 &    GND & 8 bits &     no & 2 (8 bits) &     si & Msbus/$I^{2}$C & 0,92x0,70 &     64 &      N \\
\hline
 Maxim & DS4830 & 1024x16 &     16 & DIF/GND & 13 bits &     no & 2(16 bits) &     si & SPI, $I^{2}$C & 0,2x0,2 &     40 &    7,5 \\
\hline
   NXP & LPC1110 &      4 &      8 &    GND & 10 bits &     no & 2(32 bits) &     si & $I^{2}$C, UART, Soporte RS-485 & 0,42x0,51 &     20 &    2,5 \\
\hline
 Atmel & ATSAM3A8C &    256 &     16 & DIF/GND & 12 bits &     no & 9(32 bits) &     si & USB, SPI & 0,63x0,63 &     63 &    2,4 \\
\hline
 Atmel & ATSAM3S1A &     64 &      8 & DIF/GND & 10/12 bits & 1x,2x,4x & 3(16 bits) &     si & USB, $I^{2}$C, SPI & 0,35x0,35 &     44 &    2,5 \\
\hline
 Atmel & ATSAM3S1C &     16 &     16 & DIF/GND & 10/12 bits & 1x,2x,4x & 6(16 bits) &     si & USB, $I^{2}$C, SPI & 0,63x0,63 &     74 &    2,5 \\
\hline
 Atmel & ATSAMD21J &    256 &     20 & DIF/GND & 12 bits &    16x & 5 (16 bits) &     si & 1 USB 2.0 + 6 $I^{2}$C/USART/SPI & 0,47x0,47 &     64 &      3 \\
\hline
 Atmel & ATSAMD21G &    256 &     14 & DIF/GND & 12 bits &    16x & 3 (16 bits) &     si & 1 USB 2.0 + 6 $I^{2}$C/USART/SPI & 0,35x0,35 &     48 &    2,5 \\
\hline
 Atmel & ATSAMD21E &    256 &     10 & DIF/GND & 12 bits &    16x & 3 (16 bits) &     si & 1 USB 2.0 + 4 $I^{2}$C/USART/SPI & 0,35x0,35 &     32 &    2,5 \\
\hline
Texas Instr & MSP430F5340 &     64 &      9 &    GND & 12 bits &     2x & 7 (distintas) &     si & SPI, $I^{2}$C, UART & 0,3x0,3 &     48 &    3,3 \\
\hline
    ST & STM32F373CX &    256 &      4 &    GND & 12, 16 bits &    32x & 17 (distintas) &     si & 2 $I^{2}$C, 3 SIP, 3 USART, 1 USB & 0,35x0,35 &     48 &    2,5 \\
\hline
Atmel AVR & ATmega128 &    128 & 8 (2 c/gain) & 7 DIF, 8 GND & 10 bits & 1x, 10x, 200x & 4 (8 y 16) &     si & USART, SPI & 0,6x0,6 &     64 &      8 \\
\hline
\end{tabular}



}
\end{flushleft}
  \caption{Microcontroladores considerados}\label{tabla_micros}
\end{table}

\end{landscape}

\subsection{Par\'ametros tenidos en cuenta en la selecci\'on del microcontrolador} % (fold)
\label{sub:parametros_tenidos_en_cuenta_en_la_seleccion_del_microcontrolador}

\begin{itemize}
  \item \textbf{RAM:} No es un requisito principal, pero en caso de tener que decidir entre dos micros similares, el tama\~no de la memoria puede ser un factor para tomar la decisi\'on final
  \item \textbf{Cantidad de canales del ADC:} Mientras mas canales se tengan, mas se\~nales anal\'ogicas de entrada pueden haber, y mas se\~nales de sensores se podr\'an procesar simult\'aneamente
  \item \textbf{Referencia:} Nos dice si los pines del ADC se pueden usar como entrada diferencial o \'unicamente con referencia a GND. Esto es porque en el caso que haya 16 pines para el ADC y puedan usarse todos como entrada diferencial, se podr\'an usar como m\'aximo la mitad de los pines, es decir 8.
  \item \textbf{Resoluci\'on:} Es la cantidad de bits con la que se representa el dato convertido. A mayor resoluci\'on, mayor presunci\'on de la conversi\'on.
  \item \textbf{Ganancia:} Una buena ganancia interna en el micro es necesaria para una amplificaci\'on de la se\~nal.  evitando la mayor cantidad de ruido posible. Este par\'ametro es clave si se quiere trabajar con sensores que funcionan a voltajes muy peque\~nos en ambientes susceptibles al ruido el\'ectrico.
  \item \textbf{Contadores:} Cantidad de timers en el microcontrolador que se utilizar\'ian como contadores de eventos(es necesario que puedan ser clockeados por fuente externa, es decir, que la fuente que incrementa el contador provenga de eventos externos y no interiores al microcontrolador).
  \item \textbf{Modos de bajo consumo:} Si tiene mas de un modo de bajo consumo, es mas simple lograr que el sistema se encuentre el mayor tiempo posible consumiendo lo menor posible.
  \item \textbf{Puerto serie:} Interfaces seriales que soporta el micro. M\'inimamente se necesita que soporten $I^{2}$C y UART.
  \item \textbf{Dimensi\'on:} Dimensi\'on del micro. El tama\~no de la placa deber\'ia ser lo menor posible por lo que mientras mas peque\~no el micro, mejor.
  \item \textbf{Cantidad de pines:} Dependiendo del encapsulado, habr\'a una cantidad de pines. La cantidad puede afectar el tama\~no y la complejidad de la placa.
  \item \textbf{Precio:} Costo en dolares del integrado.
\end{itemize}
% subsection parametros_tenidos_en_cuenta_en_la_seleccion_del_microcontrolador (end)

\subsection{Selecci\'on} % (fold)
\label{sub:seleccion}

En el momento, hab\'ia en el laboratorio una placa de desarrollo de Silicon Labs con el microcontrolador C8051F352. Este mismo fue considerado dentro de las elecciones posibles, como puede verse en el cuadro \ref{tabla_micros}.

Adem\'as de la ventaja de tenerlo en el mismo laboratorio, la placa de Silicon Labs tiene la particularidad de tener una buena ganancia m\'axima (128x) a la entrada del ADC, lo cual lo distingue del resto de los microcontroladores analizados. Adem\'as de esto, cumple con el resto de los requisitos propuestos por nuestro tutor, por lo que consist\'ia en una buena elecci\'on.

Habiendo hecho este an\'alisis, se decidi\'o optar por utilizar el microcontrolador C8051F352 de Silicon Labs.


% subsection selecci\'on (end)
% section investigacion (end)


\clearpage
